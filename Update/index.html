<!DOCTYPE html>
<html lang='ja'>
  <head>
    <title>更新履歴</title>
    <meta charset='UTF-8'>
    <style>
      body {
        font-family: sans-serif;
        line-height: 1.6;
        max-width: 800px;
        margin: 2em auto;
        padding: 0 1em;
      }
      h1, h2 {
        border-bottom: 1px solid #ccc;
        padding-bottom: 0.3em;
      }
    </style>
  </head>
  <body>
    <h1>更新履歴</h1>
    <div id='updates'></div>
    <script>
      (async () => {
        const params = new URLSearchParams(window.location.search);
        const app = params.get('app');
        const box = document.getElementById('updates');
  
        if (!app) return;

        try {
          const response = await fetch('https://ysas4331.github.io/Useful/Update/updates.json');
          if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
          const updates = await response.json();

          const data = updates[app];
          if (!data) return;
          
          // 追加処理
          data.updates.forEach(update => {
            const div = document.createElement('div');
            div.classList.add('update');
            const date = document.createElement('div');
            date.classList.add('date');
            date.textContent = '更新日:';
            const updateTime = document.createElement('time');
            updateTime.dateTime = update.date;
            updateTime.textContent = update.date;

            date.appendChild(updateTime);
            div.appendChild(date);

            box.appendChild(div);
          });
        } catch (e) {
          console.error('取得に失敗しました', e);
        }
      })();
    </script>
  </body>
</html>
